{% schema %}
{
  "name": "Custom Subscription",
  "tag": "section",
  "class": "custom-subscription-tabs-columns",
  "settings": [
    { "type": "text", "id": "title", "label": "Título principal", "default": "RECEIVE SPECIAL OFFERS AND FIRST LOOK AT NEW PRODUCTS." },

    { "type": "header", "content": "Estilos de Texto" },
    { "type": "color", "id": "price_color", "label": "Color del precio", "default": "#000000" },
    { "type": "range", "id": "price_size", "min": 16, "max": 40, "step": 1, "unit": "px", "label": "Tamaño del precio", "default": 22 },

    { "type": "color", "id": "subtitle_color", "label": "Color del subtítulo", "default": "#000000" },
    { "type": "range", "id": "subtitle_size", "min": 12, "max": 30, "step": 1, "unit": "px", "label": "Tamaño del subtítulo", "default": 16 },

    { "type": "color", "id": "desc_color", "label": "Color del texto", "default": "#000000" },
    { "type": "range", "id": "desc_size", "min": 12, "max": 24, "step": 1, "unit": "px", "label": "Tamaño del texto", "default": 14 },

    { "type": "header", "content": "Estilos de Botón" },
    { "type": "color", "id": "btn_bg_color", "label": "Color de fondo", "default": "#000000" },
    { "type": "color", "id": "btn_text_color", "label": "Color del texto", "default": "#ffffff" },
    { "type": "range", "id": "btn_size", "min": 10, "max": 24, "step": 1, "unit": "px", "label": "Tamaño del texto del botón", "default": 14 },

    { "type": "range", "id": "spacing", "min": 0, "max": 40, "step": 2, "unit": "px", "label": "Espaciado entre elementos", "default": 10 },

    { "type": "header", "content": "México - Columnas 1 a 4" },
    { "type": "text", "id": "mx_1_price", "label": "MX Col 1 - Precio" },
    { "type": "text", "id": "mx_1_subtitle", "label": "MX Col 1 - Subtítulo" },
    { "type": "textarea", "id": "mx_1_desc", "label": "MX Col 1 - Descripción" },
    { "type": "text", "id": "mx_1_btn", "label": "MX Col 1 - Texto botón", "default": "Seleccionar" },
    { "type": "url", "id": "mx_1_link", "label": "MX Col 1 - Link botón" },

    { "type": "text", "id": "mx_2_price", "label": "MX Col 2 - Precio" },
    { "type": "text", "id": "mx_2_subtitle", "label": "MX Col 2 - Subtítulo" },
    { "type": "textarea", "id": "mx_2_desc", "label": "MX Col 2 - Descripción" },
    { "type": "text", "id": "mx_2_btn", "label": "MX Col 2 - Texto botón", "default": "Seleccionar" },
    { "type": "url", "id": "mx_2_link", "label": "MX Col 2 - Link botón" },

    { "type": "text", "id": "mx_3_price", "label": "MX Col 3 - Precio" },
    { "type": "text", "id": "mx_3_subtitle", "label": "MX Col 3 - Subtítulo" },
    { "type": "textarea", "id": "mx_3_desc", "label": "MX Col 3 - Descripción" },
    { "type": "text", "id": "mx_3_btn", "label": "MX Col 3 - Texto botón", "default": "Seleccionar" },
    { "type": "url", "id": "mx_3_link", "label": "MX Col 3 - Link botón" },

    { "type": "text", "id": "mx_4_price", "label": "MX Col 4 - Precio" },
    { "type": "text", "id": "mx_4_subtitle", "label": "MX Col 4 - Subtítulo" },
    { "type": "textarea", "id": "mx_4_desc", "label": "MX Col 4 - Descripción" },
    { "type": "text", "id": "mx_4_btn", "label": "MX Col 4 - Texto botón", "default": "Seleccionar" },
    { "type": "url", "id": "mx_4_link", "label": "MX Col 4 - Link botón" },

    { "type": "header", "content": "USA - Columnas 1 a 4" },
    { "type": "text", "id": "usa_1_price", "label": "USA Col 1 - Price" },
    { "type": "text", "id": "usa_1_subtitle", "label": "USA Col 1 - Subtitle" },
    { "type": "textarea", "id": "usa_1_desc", "label": "USA Col 1 - Description" },
    { "type": "text", "id": "usa_1_btn", "label": "USA Col 1 - Button text", "default": "Select" },
    { "type": "url", "id": "usa_1_link", "label": "USA Col 1 - Button link" },

    { "type": "text", "id": "usa_2_price", "label": "USA Col 2 - Price" },
    { "type": "text", "id": "usa_2_subtitle", "label": "USA Col 2 - Subtitle" },
    { "type": "textarea", "id": "usa_2_desc", "label": "USA Col 2 - Description" },
    { "type": "text", "id": "usa_2_btn", "label": "USA Col 2 - Button text", "default": "Select" },
    { "type": "url", "id": "usa_2_link", "label": "USA Col 2 - Button link" },

    { "type": "text", "id": "usa_3_price", "label": "USA Col 3 - Price" },
    { "type": "text", "id": "usa_3_subtitle", "label": "USA Col 3 - Subtitle" },
    { "type": "textarea", "id": "usa_3_desc", "label": "USA Col 3 - Description" },
    { "type": "text", "id": "usa_3_btn", "label": "USA Col 3 - Button text", "default": "Select" },
    { "type": "url", "id": "usa_3_link", "label": "USA Col 3 - Button link" },

    { "type": "text", "id": "usa_4_price", "label": "USA Col 4 - Price" },
    { "type": "text", "id": "usa_4_subtitle", "label": "USA Col 4 - Subtitle" },
    { "type": "textarea", "id": "usa_4_desc", "label": "USA Col 4 - Description" },
    { "type": "text", "id": "usa_4_btn", "label": "USA Col 4 - Button text", "default": "Select" },
    { "type": "url", "id": "usa_4_link", "label": "USA Col 4 - Button link" }
  ],
  "presets": [
    { "name": "Custom Subscription Tabs Columns" }
  ]
}
{% endschema %}

<div class="subscription-tabs-header">
  <div class="title">{{ section.settings.title }}</div>
  <div class="tab-switch">
    <button class="tab-button active" data-tab="mexico">México</button>
    {% assign usa_has_content = false %}
    {% for i in (1..4) %}
      {% assign key = 'usa_' | append: i | append: '_price' %}
      {% if section.settings[key] != blank %}
        {% assign usa_has_content = true %}
      {% endif %}
    {% endfor %}
    {% if usa_has_content %}
      <button class="tab-button" data-tab="usa">Estados Unidos</button>
    {% endif %}
  </div>
</div>

<!-- MÉXICO -->
<div class="tab-columns tab-mexico active">
  {% for i in (1..4) %}
    {% assign price_key = 'mx_' | append: i | append: '_price' %}
    {% assign subtitle_key = 'mx_' | append: i | append: '_subtitle' %}
    {% assign desc_key = 'mx_' | append: i | append: '_desc' %}
    {% assign btn_key = 'mx_' | append: i | append: '_btn' %}
    {% assign link_key = 'mx_' | append: i | append: '_link' %}
    <div class="column">
      <div class="price">{{ section.settings[price_key] }}</div>
      <div class="subtitle"><strong>{{ section.settings[subtitle_key] }}</strong></div>
      <div class="desc">{{ section.settings[desc_key] | newline_to_br }}</div>
      {% if section.settings[link_key] %}
        <a href="{{ section.settings[link_key] }}" class="btn">{{ section.settings[btn_key] }}</a>
      {% endif %}
    </div>
  {% endfor %}
</div>

<!-- USA -->
{% if usa_has_content %}
  <div class="tab-columns tab-usa">
    {% for i in (1..4) %}
      {% assign price_key = 'usa_' | append: i | append: '_price' %}
      {% assign subtitle_key = 'usa_' | append: i | append: '_subtitle' %}
      {% assign desc_key = 'usa_' | append: i | append: '_desc' %}
      {% assign btn_key = 'usa_' | append: i | append: '_btn' %}
      {% assign link_key = 'usa_' | append: i | append: '_link' %}
      <div class="column">
        <div class="price">{{ section.settings[price_key] }}</div>
        <div class="subtitle"><strong>{{ section.settings[subtitle_key] }}</strong></div>
        <div class="desc">{{ section.settings[desc_key] | newline_to_br }}</div>
        {% if section.settings[link_key] %}
          <a href="{{ section.settings[link_key] }}" class="btn">{{ section.settings[btn_key] }}</a>
        {% endif %}
      </div>
    {% endfor %}
  </div>
{% endif %}

<style>
.subscription-tabs-header {
  background-color: #66ff5c;
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 20px;
  text-transform: uppercase;
  font-weight: bold;
  flex-wrap: wrap;
}
.tab-switch {
  display: flex;
  gap: 10px;
}
.tab-button {
  background: none;
  border: none;
  padding: 10px 20px;
  font-weight: bold;
  cursor: pointer;
  border-bottom: 2px solid transparent;
}
.tab-button.active {
  border-bottom: 2px solid black;
}
.tab-columns {
  display: none;
  grid-template-columns: repeat(4, 1fr);
  border-top: 1px solid black;
  border-bottom: 1px solid black;
}
.tab-columns.active {
  display: grid;
}
.column {
  padding: 20px;
  border-right: 1px solid black;
  border-bottom: 1px solid black;
  background: #f5f5f0;
}
.column:last-child {
  border-right: none;
}
.price {
  font-size: {{ section.settings.price_size }}px;
  color: {{ section.settings.price_color }};
  margin-bottom: {{ section.settings.spacing }}px;
  font-weight: bold;
}
.subtitle {
  font-size: {{ section.settings.subtitle_size }}px;
  color: {{ section.settings.subtitle_color }};
  margin-bottom: {{ section.settings.spacing }}px;
}
.desc {
  font-size: {{ section.settings.desc_size }}px;
  color: {{ section.settings.desc_color }};
  margin-bottom: {{ section.settings.spacing }}px;
}
.btn {
  display: inline-block;
  margin-top: {{ section.settings.spacing }}px;
  padding: 10px 20px;
  font-size: {{ section.settings.btn_size }}px;
  background: {{ section.settings.btn_bg_color }};
  color: {{ section.settings.btn_text_color }};
  text-align: center;
  font-weight: bold;
  text-decoration: none;
  border-radius: 6px;
}
@media screen and (max-width: 768px) {
  .tab-columns {
    grid-template-columns: repeat(2, 1fr);
  }
}
@media screen and (max-width: 480px) {
  .tab-columns {
    grid-template-columns: 1fr;
  }
}
</style>

<script>
document.addEventListener("DOMContentLoaded", function () {
  const buttons = document.querySelectorAll(".tab-button");
  const mexicoTab = document.querySelector(".tab-mexico");
  const usaTab = document.querySelector(".tab-usa");

  buttons.forEach(button => {
    button.addEventListener("click", () => {
      buttons.forEach(btn => btn.classList.remove("active"));
      button.classList.add("active");

      if (button.dataset.tab === "mexico") {
        mexicoTab?.classList.add("active");
        usaTab?.classList.remove("active");
      } else {
        usaTab?.classList.add("active");
        mexicoTab?.classList.remove("active");
      }
    });
  });
});
</script>

