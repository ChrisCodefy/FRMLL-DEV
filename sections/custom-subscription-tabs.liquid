{% schema %}
{
  "name": "Custom Subscription Tabs",
  "tag": "section",
  "class": "custom-subscription-tabs-columns",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "Title",
      "default": "RECEIVE SPECIAL OFFERS AND FIRST LOOK AT NEW PRODUCTS."
    }
  ],
  "blocks": [
    {
      "type": "tab_content",
      "name": "Mexico Tab Column",
      "settings": [
        { "type": "textarea", "id": "mexico_text", "label": "Mexico Content" }
      ]
    },
    {
      "type": "tab_content_usa",
      "name": "USA Tab Column",
      "settings": [
        { "type": "textarea", "id": "usa_text", "label": "USA Content" }
      ]
    }
  ],
  "presets": [
    {
      "name": "Custom Subscription Tabs Columns",
      "blocks": [
        { "type": "tab_content", "settings": { "mexico_text": "Contenido México 1" } },
        { "type": "tab_content", "settings": { "mexico_text": "Contenido México 2" } },
        { "type": "tab_content", "settings": { "mexico_text": "Contenido México 3" } },
        { "type": "tab_content", "settings": { "mexico_text": "Contenido México 4" } },
        { "type": "tab_content_usa", "settings": { "usa_text": "Contenido USA 1" } },
        { "type": "tab_content_usa", "settings": { "usa_text": "Contenido USA 2" } },
        { "type": "tab_content_usa", "settings": { "usa_text": "Contenido USA 3" } },
        { "type": "tab_content_usa", "settings": { "usa_text": "Contenido USA 4" } }
      ]
    }
  ]
}
{% endschema %}

<div class="subscription-tabs-header">
  <div class="title">{{ section.settings.title }}</div>
  <div class="tab-switch">
    <button class="tab-button active" data-tab="mexico">México</button>
    <button class="tab-button" data-tab="usa">Estados Unidos</button>
  </div>
</div>

<div class="tab-columns tab-mexico active">
  {% for block in section.blocks %}
    {% if block.type == 'tab_content' %}
      <div class="column">
        {{ block.settings.mexico_text | newline_to_br }}
      </div>
    {% endif %}
  {% endfor %}
</div>

<div class="tab-columns tab-usa">
  {% for block in section.blocks %}
    {% if block.type == 'tab_content_usa' %}
      <div class="column">
        {{ block.settings.usa_text | newline_to_br }}
      </div>
    {% endif %}
  {% endfor %}
</div>

<style>
.subscription-tabs-header {
  background-color: #66ff5c;
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 20px;
  text-transform: uppercase;
  font-weight: bold;
}
.subscription-tabs-header .title {
  font-size: 16px;
}
.tab-switch {
  display: flex;
  gap: 10px;
}
.tab-button {
  background: none;
  border: none;
  padding: 10px 20px;
  font-weight: bold;
  cursor: pointer;
  border-bottom: 2px solid transparent;
}
.tab-button.active {
  border-bottom: 2px solid black;
}
.tab-columns {
  display: none;
  width: 100%;
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  border-top: 1px solid black;
  border-bottom: 1px solid black;
}
.tab-columns.active {
  display: grid;
}
.column {
  padding: 20px;
  border-right: 1px solid black;
  border-bottom: 1px solid black;
  background: #f5f5f0;
}
.column:last-child {
  border-right: none;
}
</style>

<script>
document.addEventListener("DOMContentLoaded", function () {
  const buttons = document.querySelectorAll(".tab-button");
  const tabs = document.querySelectorAll(".tab-columns");

  buttons.forEach(button => {
    button.addEventListener("click", () => {
      buttons.forEach(btn => btn.classList.remove("active"));
      tabs.forEach(tab => tab.classList.remove("active"));

      button.classList.add("active");
      document.querySelector(`.tab-${button.dataset.tab}`).classList.add("active");
    });
  });
});
</script>
