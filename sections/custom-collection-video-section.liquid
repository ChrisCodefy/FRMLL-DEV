<section class="custom-collection-video-section">
  <div class="collection-columns" style="display: flex; width: 100%;">
    {% for block in section.blocks %}
      {% if block.type == 'collection_column' %}
        <div style="flex: 1; position: relative;">
          <img src="{{ block.settings.image | image_url }}" alt="{{ block.settings.collection_title }}" style="width: 100%; height: auto;" />
          {% if block.settings.position == 'top-left' %}
            <div style="position: absolute; top: 0; left: 0; padding: 10px; background: rgba(255, 255, 255, 0.8); font-weight: bold;">
              {{ block.settings.collection_title }}
            </div>
          {% elsif block.settings.position == 'bottom-right' %}
            <div style="position: absolute; bottom: 0; right: 0; padding: 10px; background: rgba(255, 255, 255, 0.8); font-weight: bold;">
              {{ block.settings.collection_title }}
            </div>
          {% endif %}
        </div>
      {% endif %}
    {% endfor %}
  </div>

  {% assign video_block = section.blocks | where: "type", "video_block" | first %}
  {% if video_block %}
    <div class="collection-video" style="position: relative; width: 100%; margin-top: 20px;">
      <video autoplay muted loop playsinline style="width: 100%;">
        <source src="{{ video_block.settings.video_url }}" type="video/mp4">
      </video>
      <div style="position: absolute; bottom: 20px; left: 20px; color: white;">
        <h2>{{ video_block.settings.title }}</h2>
        <p>{{ video_block.settings.subtitle }}</p>
        <a href="{{ video_block.settings.button_link }}" class="btn" style="background: white; padding: 10px 20px; color: black; text-decoration: none;">{{ video_block.settings.button_text }}</a>
      </div>
    </div>
  {% endif %}
</section>

{% schema %}
{
  "name": "Custom Colección Video",
  "settings": [],
  "blocks": [
    {
      "type": "collection_column",
      "name": "Columna de colección",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Imagen"
        },
        {
          "type": "text",
          "id": "collection_title",
          "label": "Título de la colección"
        },
        {
          "type": "select",
          "id": "position",
          "label": "Posición del título",
          "options": [
            {
              "value": "top-left",
              "label": "Arriba a la izquierda"
            },
            {
              "value": "bottom-right",
              "label": "Abajo a la derecha"
            }
          ],
          "default": "top-left"
        }
      ]
    },
    {
      "type": "video_block",
      "name": "Video",
      "settings": [
        {
          "type": "url",
          "id": "video_url",
          "label": "URL del video (MP4)"
        },
        {
          "type": "text",
          "id": "title",
          "label": "Título"
        },
        {
          "type": "text",
          "id": "subtitle",
          "label": "Subtítulo"
        },
        {
          "type": "text",
          "id": "button_text",
          "label": "Texto del botón",
          "default": "SHOP NOW →"
        },
        {
          "type": "url",
          "id": "button_link",
          "label": "Enlace del botón"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Colección con Video",
      "blocks": [
        {
          "type": "collection_column"
        },
        {
          "type": "collection_column"
        },
        {
          "type": "video_block"
        }
      ]
    }
  ]
}
{% endschema %}
